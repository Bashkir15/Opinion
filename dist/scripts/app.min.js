webpackJsonp([1],[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(2),o=r(a),s=n(114),i=r(s),c=n(112);r(c);n(113),n(209),n(150),n(172),n(128);var u=n(116),l=r(u),h=n(118),d=(r(h),n(117)),f=r(d),m=n(119),p=r(m),g=[i.default,"ngMaterial","ngAnimate","angularMoment","ngFileUpload","app.config","app.pages","app.components"];window.app=o.default.module("app",g),o.default.module("app").config(l.default),o.default.module("app").controller("AppController",f.default),o.default.module("app").service("Websocket",p.default),o.default.bootstrap(document,["app"],{strictDi:!0})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){"ngInject";n.interceptors.push(s.default),e.state("app",{abstract:!0,templateUrl:"./app/pages/app-layout.html"}),t.otherwise("/")}a.$inject=["$stateProvider","$urlRouterProvider","$httpProvider"],Object.defineProperty(t,"__esModule",{value:!0});var o=n(151),s=r(o);t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t,r){"ngInject";n(this,e),this._$rootScope=t,this._$dialog=r};r.$inject=["$rootScope","$mdDialog"],t.default=r},function(e,t){"use strict";function n(e){var t=io.connect("http://localhost:8000");t.on("connect",function(){console.log("yay")})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(e){"ngInject";var t={conn:{},connect:function(){var t=this,n=new io.connect("http://localhost:8000");n.on("connect",function(){console.log("connected")}),n.on("disconnect",function(){t.connect()}),n.on("newNotification",function(t){e.$broadcast("newNotification",t)}),n.on("newChatNotification",function(t){e.$broadcast("newChatMessage",t)}),this.conn=n},reconnect:function(){this.conn.close(),this.connect()},close:function(){this.conn.close()},online:function(e){this.conn.emit("online",{userId:e})},logout:function(e){this.conn.emit("logout")},follow:function(e){this.conn.emit("followed",{userId:e})},unfollow:function(e){this.conn.emit("unfollowed",{userId:e})},message:function(e){this.conn.emit("messaged",{userId:e})},chatsMessage:function(e){this.conn.emit("chatMessaged",{chatId:e})}};return t.connect(),t}n.$inject=["$rootScope"],Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),s=n(122),i=r(s),c=n(121),u=r(c),l=n(123),h=r(l),d=o.default.module("auth.components",[]);d.component("signupForm",i.default),d.component("loginForm",u.default),d.component("updateProfile",h.default),t.default=d},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o,s,i,c){"ngInject";n(this,e),this._Auth=a,this._Toast=o,this._Storage=s,this._$state=t,this._$dialog=r,this._Websocket=i,this._$rootScope=c,this.data={email:"",password:""},this.checkRemember()}return e.$inject=["$state","$mdDialog","Auth","Toast","Storage","Websocket","$rootScope"],r(e,[{key:"checkRemember",value:function(){var e=this._Storage.get("userEmail");e?(this.data.email=atob(e),this.isRemembered=!0):this.data.email=""}},{key:"login",value:function(e){var t=this;if(this.isLoading=!0,e){if("undefined"!=typeof this.remember){var n=btoa(this.data.email);this._Storage.set("userEmail",n)}"undefined"!=typeof this.forget&&this._Storage.remove("userEmail"),this._Auth.login(this.data).then(function(e){e.data.success?(t.postLogin(e),t._Toast.success("Welcome back "+e.data.res.record.username)):t._Toast.error(e.data.res.message)})}else this._Toast.error("hmm, form issue!")}},{key:"postLogin",value:function(e){var t=e.data.res.record,n=angular.toJson(t);this._Storage.set("user",n),this._Storage.set("opinion-token",e.data.res.token),this._Websocket.online(e.data.res.record._id),this._$state.go("app.home",{},{reload:!0})}},{key:"openPasswordReset",value:function(){this._$dialog.show({controller:"PasswordResetController",controllerAs:"$ctrl",templateUrl:"./app/pages/auth/reset/reset.html"})}}]),e}(),o={scope:{},controller:a,templateUrl:"./app/components/auth/login/login.component.html"};t.default=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o,s,i){"ngInject";n(this,e),this.data={name:"",username:"",email:"",password:""},this._state=t,this._Auth=r,this._Toast=a,this._Storage=o,this._$rootScope=s,this._Websocket=i}return e.$inject=["$state","Auth","Toast","Storage","$rootScope","Websocket"],r(e,[{key:"signup",value:function(e){var t=this;e?this._Auth.signup(this.data).then(function(e){t._Toast.success("Welcome to Opinionated! "+e.data.res.record.username),t.postSignup(e)},function(e){t._Toast.error("boo, but still yay")}):this._Toast.error("hmm, form issue!")}},{key:"postSignup",value:function(e){var t=angular.toJson(e.data.res.record);this._Storage.set("user",t),this._Storage.set("opinion-token",e.data.res.token),this._Websocket.online(e.data.res.record._id),this._state.go("app.updateProfile",{userId:e.data.res.record._id},{reload:!0})}}]),e}(),o={scope:{},controller:a,templateUrl:"./app/components/auth/signup/signup.component.html"};t.default=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o,s){"ngInject";n(this,e),this._Auth=t,this._Toast=r,this._$state=a,this._$rootScope=o,this._Upload=s,this.data={gender:this.user.gender,phone:this.user.phone,occupation:this.user.occupation,interests:this.user.interests,bio:this.user.bio}}return e.$inject=["Auth","Toast","$state","$rootScope","Upload"],r(e,[{key:"updateProfile",value:function(e){var t=this;e&&this._Auth.updateProfile(this.user._id,this.data).then(function(e){t._Toast.success("You have updated your profile!"),t._$rootScope.$broadcast("profileUpdated"),t._$state.go("app.profile.overview",{userId:t.user._id},{reload:!0})})}},{key:"uploadImage",value:function(e){var t=this;e&&this._Upload.upload({url:"/users/uploadPicture/"+this.user._id,file:e}).progress(function(e){this.progressPercentage=parseInt(100*e.loaded/e.total)}).success(function(e,n,r,a){t._Toast.success("Your photo has been uploaded"),t.uploaded=!0})}}]),e}(),o={scope:{},bindings:{user:"<"},controller:a,templateUrl:"./app/components/auth/updateProfile/update.profile.html"};t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),s=n(125),i=r(s),c=n(127),u=r(c),l=n(126),h=r(l),d=o.default.module("chats.components",[]);d.component("chatsList",i.default),d.component("singleChat",u.default),d.component("chatMessages",h.default),t.default=d},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t,r){"ngInject";var a=this;n(this,e),this._$state=r,this._$rootScope=t,this._$rootScope.$on("hideChats",function(){a.hideChats=!0}),this._$rootScope.$on("showChats",function(){a.hideChats=!1})};r.$inject=["$rootScope","$state"];var a={scope:{},bindings:{chats:"<"},controller:r,templateUrl:"./app/components/chats/list/list.html"};t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o,s,i,c){"ngInject";n(this,e),this._Chat=t,this._Auth=r,this._$timeout=a,this._$stateParams=o,this._$rootScope=i,this._$state=s,this._Websocket=c,this.chatId=this._$stateParams.chatId,this.userId=this._Auth.getUser()._id,this.data={message:"",creator:this.userId},this.chatId&&document.documentElement.clientWidth<1300&&this._$rootScope.$broadcast("hideChats")}return e.$inject=["Chat","Auth","$timeout","$stateParams","$state","$rootScope","Websocket"],r(e,[{key:"scrollToBottom",value:function(){this._$timeout(function(){var e=document.getElementById("scrollContainer");e.scrollTop=e.scrollHeight},0,!1)}},{key:"sendMessage",value:function(e){var t=this;e&&this._Chat.message(this.chatId,this.data).then(function(e){t._Websocket.chatsMessage(t.chatId),t._$rootScope.$broadcast("newMessage"),t.scrollToBottom(),t.resetForm()})}},{key:"resetForm",value:function(){this.chatForm.$setUntouched(),this.chatForm.$setPristine(),this.data.message=""}}]),e}(),o={scope:{},bindings:{messages:"=",chat:"<"},controller:a,templateUrl:"./app/components/chats/messages/messages.html"};t.default=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o,s,i){"ngInject";n(this,e),this._Chat=t,this._$rootScope=r,this._$location=a,this._$state=o,this._Auth=s,this._$dialog=i,this.currentUser=this._Auth.getUser()._id,"app.chats.inbox"!=this._$state.current.name&&"app.chats.saved"!=this._$state.current.name||(this.hideRemoved=!0)}return e.$inject=["Chat","$rootScope","$location","$state","Auth","$mdDialog"],r(e,[{key:"goToChat",value:function(e){"app.chats.inbox"==this._$state.current.name?this._$state.go("app.chats.inbox.messages",{chatId:e._id}):"app.chats.saved"==this._$state.current.name?this._$state.go("app.chats.saved.messages",{chatId:e._id}):"app.chats.trash"==this._$state.current.name&&this._$state.go("app.chats.trash.messages",{chatId:e._id})}},{key:"toggleSave",value:function(e){e.saved?this._Chat.unsave(e._id).then(function(t){angular.extend(e,t.data.res.record)}):this._Chat.save(e._id).then(function(t){angular.extend(e,t.data.res.record)})}},{key:"toggleRemove",value:function(e){e.isDeleted?this._Chat.unremove(e._id).then(function(t){angular.extend(e,t.data.res.record)}):this._Chat.remove(e._id).then(function(t){angular.extend(e,t.data.res.record)})}}]),e}(),o={scope:{},bindings:{chat:"<"},controller:a,templateUrl:"./app/components/chats/single/single.html"};t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a);n(149),n(120),n(134),n(147),n(124);var s=["shared.components","auth.components","forum.components","profile.components","chats.components"],i=o.default.module("app.components",s);t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),s=n(130),i=r(s),c=n(132),u=r(c),l=n(133),h=r(l),d=n(131),f=r(d),m=o.default.module("comments.components",[]);m.component("createComment",i.default),m.component("commentsList",u.default),m.component("singleComment",h.default),m.component("editComment",f.default),t.default=m},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o){"ngInject";n(this,e),this._Comment=t,this._Toast=r,this.threadId=a.threadId,this._$rootScope=o,this.data={content:"",thread:this.threadId}}return e.$inject=["Comment","Toast","$stateParams","$rootScope"],r(e,[{key:"create",value:function(e){var t=this;e?this._Comment.create(this.data).then(function(e){e.data.success?(t._Toast.success("You created a new comment"),t._$rootScope.$broadcast("commentCreated"),t.clearForm()):t._Toast.error(e.data.res.message)}):this._Toast.error("Your form is not valid")}},{key:"clearForm",value:function(){this.createComment.$setPristine(),this.createComment.$setUntouched(),this.data.content=""}}]),e}(),o={scope:{},templateUrl:"./app/components/forum/comments/create/comments.create.component.html",controller:a};t.default=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r){"ngInject";n(this,e),this._$dialog=r,this._Comment=t}return e.$inject=["Comment","$mdDialog"],r(e,[{key:"edit",value:function(e){var t=this;e&&(this.data={content:this.comment.content},this._Comment.modify(this.comment._id,this.data).then(function(e){t._$dialog.hide()}))}}]),e}(),o={scope:{},bindings:{comment:"="},controller:a,templateUrl:"./app/components/forum/comments/edit/edit.html"};t.default=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r){"ngInject";n(this,e),this._$dialog=t,this._$state=r,"app.profile.comments"!=this._$state.current.name&&"app.profile.saved"!=this._$state.current.name||(this.hideCreate=!0)}return e.$inject=["$mdDialog","$state"],r(e,[{key:"openCreateComment",value:function(){this._$dialog.show({templateUrl:"./app/pages/threads/dialogs/create/create.comment.html",controller:"CommentsCreateController",controllerAs:"$ctrl",clickOutsideToClose:!0})}}]),e}(),o={scope:{},bindings:{comments:"<"},controller:a,templateUrl:"./app/components/forum/comments/list/comments.list.component.html"};t.default=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o,s,i){"ngInject";n(this,e),this._Auth=t,this._Comment=r,this._Thread=a,this._$state=s,this._isLoggedIn=this._Auth.isLoggedIn(),this._$stateParams=o,this._$dialog=i,this._threadId=o.threadId,this._isLoggedIn&&(this.currentUser=this._Auth.getUser()._id),this.getThread()}return e.$inject=["Auth","Comment","Thread","$stateParams","$state","$mdDialog"],r(e,[{key:"getThread",value:function(){var e=this;this._Thread.single(this._threadId).then(function(t){t.data.res.record.stream.moderators.forEach(function(t){e.currentUser==t&&(e.moderator=!0)})})}},{key:"like",value:function(e){this._Comment.like(e._id).then(function(t){angular.extend(e,t.data.res.record)})}},{key:"dislike",value:function(e){this._Comment.dislike(e._id).then(function(t){angular.extend(e,t.data.res.record)})}},{key:"toggleSave",value:function(e){e.saved?this._Comment.unsave(e._id).then(function(t){angular.extend(e,t.data.res.record)}):this._Comment.save(e._id).then(function(t){angular.extend(e,t.data.res.record)})}},{key:"openEditComment",value:function(e){this._$dialog.show({templateUrl:"./app/pages/threads/dialogs/edit/edit.comment.html",controller:"EditCommentController",controllerAs:"$ctrl",clickOutsideToClose:!0,locals:{item:e}})}},{key:"openDeleteComment",value:function(e){this._$dialog.show({templateUrl:"./app/pages/threads/dialogs/delete/delete.comment.html",controller:"DeleteCommentController",controllerAs:"$ctrl",clickOutsideToClose:!0,locals:{item:e}})}}]),e}(),o={scope:{},bindings:{comment:"<"},controller:a,templateUrl:"./app/components/forum/comments/single/comments.single.component.html"};t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a);n(138),n(144),n(129);var s=["streams.components","threads.components","comments.components"],i=o.default.module("forum.components",s);t.default=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a){"ngInject";n(this,e),this._Stream=t,this._Toast=r,this._$rootScope=a,this.data={name:"",description:""}}return e.$inject=["Stream","Toast","$rootScope"],r(e,[{key:"create",value:function(e){var t=this;e?this._Stream.create(this.data).then(function(e){t._Toast.success("You just created a Stream: "+e.data.res.record.name),t._$rootScope.$broadcast("streamCreated")}):this._Toast.error("Hmm... Your form isn't valid")}}]),e}(),o={scope:{},controller:a,templateUrl:"./app/components/forum/streams/create/stream.create.component.html"};t.default=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a){"ngInject";var o=this;n(this,e),this._$dialog=t,this._$state=a,this._$rootScope=r,"app.subscribedStreams"==this._$state.current.name&&(this.hideTrending=!0,this.hideCreate=!0),r.$on("streamByThreads",function(){"-threads.length"==o.rowFilter?o.rowFilter="threads.length":o.rowFilter="-threads.length"}),r.$on("streamBySubscribers",function(){"subscribers.length"==o.rowFilter?o.rowFilter="subscribers.length":o.rowFilter="-subscribers.length"}),r.$on("streamByDate",function(){"created"==o.rowFilter?o.rowFilter="-created":o.rowFilter="created"})}return e.$inject=["$mdDialog","$rootScope","$state"],r(e,[{key:"openCreateStream",value:function(){this._$dialog.show({templateUrl:"./app/pages/streams/dialogs/create/create.html",controller:"StreamsCreateController",controllerAs:"$ctrl",clickOutsideToClose:!0})}}]),e}(),o={scope:{},bindings:{streams:"="},controller:a,templateUrl:"./app/components/forum/streams/list/streams.list.component.html"};t.default=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){"ngInject";n(this,e),this._Stream=t}return e.$inject=["Stream"],r(e,[{key:"toggleSubscribe",value:function(e){e.subscribed?this._Stream.unsubscribe(e._id).then(function(t){angular.extend(e,t.data.res.record)}):this._Stream.subscribe(e._id).then(function(t){angular.extend(e,t.data.res.record)})}}]),e}(),o={scope:{},bindings:{stream:"="},controller:a,templateUrl:"./app/components/forum/streams/single/streams.single.component.html"};t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),s=n(136),i=r(s),c=n(137),u=r(c),l=n(135),h=r(l),d=n(139),f=r(d),m=o.default.module("streams.components",[]);m.component("streamsList",i.default),m.component("singleStream",u.default),m.component("createStream",h.default),m.component("trendingStream",f.default),t.default=m},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){"ngInject";n(this,e),this._Stream=t}return e.$inject=["Stream"],r(e,[{key:"toggleSubscribe",value:function(e){e.subscribed?this._Stream.unsubscribe(e._id).then(function(t){angular.extend(e,t.data.res.record)}):this._Stream.subscribe(e._id).then(function(t){angular.extend(e,t.data.res.record)})}}]),e}(),o={scope:{},bindings:{stream:"<"},controller:a,templateUrl:"./app/components/forum/streams/trending/streams.trending.component.html"};t.default=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o){"ngInject";n(this,e),this._Toast=t,this._Thread=r,this._$rootScope=o,this._$stateParams=a,this.streamId=this._$stateParams.streamId,this.data={title:"",content:"",stream:this.streamId,link:""}}return e.$inject=["Toast","Thread","$stateParams","$rootScope"],r(e,[{key:"create",value:function(e){var t=this;e?(this._$stateParams.streamId&&(this.data.stream=this._$stateParams.streamId),this._Thread.create(this.data).then(function(e){t._Toast.success("You have just posted a new thread "+e.data.res.record.title),t._$rootScope.$broadcast("threadCreated")})):this._Toast.error("Hmm.. your form is not valid")}},{key:"makeLink",value:function(){this.hasLink=!this.hasLink}}]),e}(),o={scope:{},bindings:{streamId:"<"},controller:a,templateUrl:"./app/components/forum/threads/create/threads.create.component.html"};t.default=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a){"ngInject";n(this,e),this._$dialog=r,this._$rootScope=a,this._Thread=t}return e.$inject=["Thread","$mdDialog","$rootScope"],r(e,[{key:"edit",value:function(e){var t=this;e&&(this.data={title:this.thread.title,content:this.thread.content},this.thread.link&&(this.data.link=this.thread.link),this._Thread.modify(this.thread._id,this.data).then(function(e){t._$rootScope.$broadcast("threadEdited"),t._$dialog.hide()}))}}]),e}(),o={scope:{},bindings:{thread:"="},controller:a,templateUrl:"./app/components/forum/threads/edit/edit.html"};t.default=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o){"ngInject";var s=this;n(this,e),this._$stateParams=t,this._$dialog=r,this._$rootScope=a,this._$state=o,"app.home"!=this._$state.current.name&&"app.profile.threads"!=this._$state.current.name&&"app.profile.saved"!=this._$state.current.name||(this.hideCreate=!0,this.hideSidebar=!0),"app.home"==this._$state.current.name&&(this.hideNoItems=!0),this.streamId=t.streamId,a.$on("threadByScore",function(){"-score"==s.rowFilter?s.rowFilter="score":s.rowFilter="-score"}),a.$on("threadBySaves",function(){"-saves.length"==s.rowFilter?s.rowFilter="saves.length":s.rowFilter="-saves.length"}),a.$on("threadByDate",function(){"-created"==s.rowFilter?s.rowFilter="created":s.rowFilter="-created"}),a.$on("threadByComments",function(){"-comments.length"==s.rowFilter?s.rowFilter="comments.length":s.rowFilter="-comments.length"})}return e.$inject=["$stateParams","$mdDialog","$rootScope","$state"],r(e,[{key:"openCreateThread",value:function(){this._$dialog.show({templateUrl:"./app/pages/threads/dialogs/create/create.html",controller:"ThreadsCreateController",controllerAs:"$ctrl",clickOutsideToClose:!0})}}]),e}(),o={scope:{},bindings:{threads:"<"},controller:a,templateUrl:"./app/components/forum/threads/list/threads.list.component.html"};t.default=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o,s){"ngInject";var i=this;n(this,e),this._$stateParams=a,this.streamId=this._$stateParams.streamId,this._$state=o,this._$dialog=s,this._Thread=r,this._Auth=t,this._isLoggedIn=this._Auth.isLoggedIn(),this._isLoggedIn&&(this.currentUser=this._Auth.getUser()._id),"app.singleStream"==this._$state.current.name&&this.thread.stream.moderators.forEach(function(e){i.currentUser==e&&(i.moderator=!0)})}return e.$inject=["Auth","Thread","$stateParams","$state","$mdDialog"],r(e,[{key:"toggleSave",value:function(e){e.saved?this._Thread.unsave(e._id).then(function(t){angular.extend(e,t.data.res.record)}):this._Thread.save(e._id).then(function(t){angular.extend(e,t.data.res.record)})}},{key:"like",value:function(e){this._Thread.like(e._id).then(function(t){angular.extend(e,t.data.res.record)})}},{key:"unlike",value:function(e){this._Thread.unlike(e._id).then(function(t){angular.extend(e,t.data.res.record)})}},{key:"delete",value:function(e){var t=this;this._Thread.remove(e._id).then(function(e){t._$state.reload()})}},{key:"openEditThread",value:function(e){this._$dialog.show({templateUrl:"./app/pages/threads/dialogs/edit/edit.html",controller:"EditThreadDialogController",controllerAs:"$ctrl",clickOutsideToClose:!0,locals:{item:e}})}},{key:"openDeleteThread",value:function(e){this._$dialog.show({templateUrl:"./app/pages/threads/dialogs/delete/delete.html",controller:"DeleteThreadDialogController",controllerAs:"$ctrl",clickOutsideToClose:!0,locals:{item:e}})}}]),e}(),o={scope:{},bindings:{thread:"<"},controller:a,templateUrl:"./app/components/forum/threads/single/threads.single.component.html"};t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),s=n(142),i=r(s),c=n(143),u=r(c),l=n(140),h=r(l),d=n(141),f=r(d),m=o.default.module("threads.components",[]);m.component("threadList",i.default),m.component("singleThread",u.default),m.component("createThread",h.default),m.component("editThread",f.default),t.default=m},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o,s,i,c,u){"ngInject";n(this,e),this._Auth=t,this._User=r,this._Chat=a,this._Toast=o,this._$rootScope=s,this._$stateParams=i,this._$dialog=c,this.userId=i.userId,this._Websocket=u,this._isLoggedIn=this._Auth.isLoggedIn(),this._isLoggedIn&&(this.currentUser=this._Auth.getUser()),this.checkUserFollowing()}return e.$inject=["Auth","User","Chat","Toast","$rootScope","$stateParams","$mdDialog","Websocket"],r(e,[{key:"checkUserFollowing",value:function(){var e=this;this._User.single(this.userId).then(function(t){e.user=t.data.res.record,e.alreadyFollowing=t.data.res.alreadyFollowing})}},{key:"follow",value:function(e){var t=this;this._User.follow(e._id).then(function(n){t._Websocket.follow(e._id),t._$rootScope.$broadcast("userFollowed"),t.checkUserFollowing()})}},{key:"unfollow",value:function(e){var t=this;this._User.unfollow(e._id).then(function(n){t._Websocket.unfollow(e._id),t._$rootScope.$broadcast("userUnfollowed"),t.checkUserFollowing()})}},{key:"message",value:function(e){var t=this,n={participants:[this.userId,this.currentUser._id]};this._Chat.create(n).then(function(n){t._Websocket.messaged(e._id),t._$dialog.show({templateUrl:"./app/pages/profile/dialogs/message/message.html",controller:"ProfileMessageController",controllerAs:"$ctrl",clickOutsideToClose:!0,locals:{message:n.data.res.record,user:t.user}})})}},{key:"openEditProfile",value:function(e){this._$dialog.show({templateUrl:"./app/pages/profile/dialogs/edit/profile.edit.html",controller:"ProfileEditController",controllerAs:"$ctrl",clickOutsideToClose:!0,locals:{user:this.user}})}},{key:"resetPassword",value:function(){this._$dialog.show({templateUrl:"./app/pages/profile/dialogs/reset/reset.html",controller:"ProfileResetController",controllerAs:"$ctrl",clickOutsideToClose:!0,locals:{user:this.user}})}}]),e}(),o={scope:{},bindings:{user:"<"},controller:a,templateUrl:"./app/components/profile/header/profile.header.component.html"};t.default=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(){"ngInject";n(this,e)},a={scope:{},bindings:{user:"<"},controller:r,templateUrl:"./app/components/profile/overview/profile.overview.component.html"};t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),s=n(145),i=r(s),c=n(146),u=r(c),l=o.default.module("profile.components",[]);l.component("profileHeader",i.default),l.component("profileOverview",u.default),
t.default=l},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o,s,i,c,u,l,h,d){"ngInject";var f=this;n(this,e),this._$sidenav=s,this._Auth=t,this._Storage=r,this._User=o,this._Stream=a,this._Chat=h,this._$state=i,this._$rootScope=c,this._$location=l,this._$dialog=u,this._Websocket=d,this.storedUser=this._Auth.getUser(),this.isLoggedIn=this._Auth.isLoggedIn(),this.isLoggedIn&&(this.getUserInfo(),this.updateNotifications(),this.updateChats()),this.notificationCount=0,this.notifications=[],this._$rootScope.$on("$stateChangeStart",function(){f._$sidenav("user-menu").close()}),this._$rootScope.$on("streamCreated",function(){f._$dialog.hide()}),this._$rootScope.$on("newNotification",function(e,t){f.user._id==t.userId&&f.updateNotifications()}),this._$rootScope.$on("newChatMessage",function(e,t){t.participants.forEach(function(e){f.user._id==e._id&&f.updateChats()})}),this._$rootScope.$on("unauthedRequest",function(){f._$dialog.show({templateUrl:"./app/pages/auth/dialogs/403.dialog.html",controller:"AuthUnauthedController",controllerAs:"$ctrl",clickOutsideToClose:!0})}),this._$rootScope,this.getStreams()}return e.$inject=["Auth","Storage","Stream","User","$mdSidenav","$state","$rootScope","$mdDialog","$location","Chat","Websocket"],r(e,[{key:"markRead",value:function(e){var t=this;this._User.notificationsRead(e._id).then(function(e){e.data.res.notifications&&e.data.res.notifications.map(function(e){e.display=t.NotificationText(e),e.thread&&(e.href="app.singleThread({threadId: item.thread._id, streamId: item.thread.stream})"),e.user&&(e.href="app.profile.overview({userId: item.user._id})")}),t.notifications=e.data.res.notifications,t.notificationCount=e.data.res.notifications.length})}},{key:"markAsRead",value:function(){var e=this;this._User.markRead(this.storedUser._id,this.notifications).then(function(t){e.updateNotifications()})}},{key:"notificationAction",value:function(e){e.thread&&this._$location.url(e.thread.stream+"/"+e.thread._id),e.user&&this._$location.url("profile/"+e.actor._id+"/overview"),e.thread&&e.user&&this._$location.url(e.thread.stream+"/"+e.thread._id)}},{key:"updateNotifications",value:function(){var e=this;this._User.notifications().then(function(t){t.data.res.notifications&&t.data.res.notifications.map(function(t){t.display=e.NotificationText(t)}),e.notifications=t.data.res.notifications,e.notificationCount=t.data.res.notifications?t.data.res.notifications.length:0})}},{key:"updateChats",value:function(){var e=this;this._Chat.findUnread(this.storedUser._id).then(function(t){e.chats=t.data.res.records,e.messageCount=t.data.res.unread})}},{key:"doChatAction",value:function(e){var t=this;this._Chat.markRead(e._id).then(function(n){t.messageCount-=1,angular.extend(e,n.data.res.record),t.updateChats(),t._$state.go("app.chats.inbox",{reload:!0})})}},{key:"NotificationText",value:function(e){if(!e)return{text:""};var t="",n=e.actor;switch(e.notificationType){case"liked":t=n.name+" has liked a post";break;case"comment":t=n.name+" has commented on a post";break;case"followed":t=n.name+" is now following you";break;case"saved":t=n.name+" has saved a thread";case"feed":t=n.name+" just created a new thread";break;case"mention":t=n.name+" has just mentioned you in a thread"}return{text:t}}},{key:"openUserMenu",value:function(){this._$sidenav("user-menu").toggle()}},{key:"getUserInfo",value:function(){var e=this;this._User.single(this.storedUser._id).then(function(t){e.user=t.data.res.record})}},{key:"getStreams",value:function(e){var t=this;e=e||{},this.isLoggedIn?(e.subscribed=!0,this._Stream.get(e).then(function(e){t.streams=e.data.res.records})):(e.unsubscribed=!0,this._Stream.get(e).then(function(e){t.streams=e.data.res.records}))}},{key:"openCreateStream",value:function(){this._$sidenav("user-menu").close(),this._$dialog.show({templateUrl:"./app/pages/streams/dialogs/create/create.html",controller:"StreamsCreateController",controllerAs:"$ctrl",clickOutsideToClose:!0})}},{key:"openCreateThread",value:function(){this._$sidenav("user-menu").close(),this._$dialog.show({templateUrl:"./app/pages/threads/dialogs/create/create.anywhere.html",controller:"CreateThreadAnywhereController",controllerAs:"$ctrl",clickOutsideToClose:!0})}},{key:"openUsersSearch",value:function(){this._$sidenav("user-menu").close(),this._$dialog.show({templateUrl:"./app/pages/profile/dialogs/search.html",controller:"UsersSearchController",controllerAs:"$ctrl",clickOutsideToClose:!0})}},{key:"openStreamSearch",value:function(){this._$sidenav("user-menu").close(),this._$dialog.show({templateUrl:"./app/pages/streams/dialogs/search/search.html",controller:"StreamsSearchController",controllerAs:"$ctrl",clickOutsideToClose:!0})}},{key:"openThreadSearch",value:function(){this._$sidenav("user-menu").close(),this._$dialog.show({templateUrl:"./app/pages/threads/dialogs/search/search.html",controller:"ThreadsSearchController",controllerAs:"$ctrl",clickOutsideToClose:!0})}},{key:"logout",value:function(){this._Storage.remove("user"),this._Storage.remove("opinion-token"),this._Websocket.logout(this.user._id),this._$state.go("app.home",{},{reload:!0}),this._$sidenav("user-menu").close()}}]),e}(),o={controller:a,templateUrl:"./app/components/shared/nav/nav.html"};t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),s=n(148),i=r(s),c=o.default.module("shared.components",[]);c.component("appNav",i.default),t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),s=n(153),i=r(s),c=n(154),u=r(c),l=n(152),h=r(l),d=o.default.module("app.config",[]);d.service("Storage",i.default),d.service("Toast",u.default),d.service("Socket",h.default),t.default=d},function(e,t){"use strict";function n(e,t){"ngInject";return{request:function(t){return t.headers.Authorization="Bearer "+e.get("opinion-token"),t},responseError:function(n){"401"!=n.status&&"403"!=n.status||(e.remove("opinion-token"),t.$broadcast("unauthedRequest")),"404"==n.status&&$state.go("app.home")}}}n.$inject=["Storage","$rootScope"],Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){"ngInject";n(this,e),this.conn={},this.connect()}return r(e,[{key:"connect",value:function(){var e=this,t=window.io();t.on("connect",function(){console.log("connected")}),t.on("disconnect",function(){e.connect()}),this.conn=t}},{key:"reconnect",value:function(){this.conn.close(),this.connect()}},{key:"close",value:function(){this.conn.close()}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){"ngInject";n(this,e)}return r(e,[{key:"get",value:function(e){return localStorage.getItem(e)}},{key:"set",value:function(e,t){return localStorage.setItem(e,t)}},{key:"remove",value:function(e){return localStorage.removeItem(e)}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){"ngInject";n(this,e),this._Toast=t}return e.$inject=["$mdToast"],r(e,[{key:"success",value:function(e){var t=this._Toast.simple().content(e).action("OK").highlightAction(!1).position("bottom right").theme("success-toast");this._Toast.show(t)}},{key:"error",value:function(e){var t=this._Toast.simple().content(e).action("OK").highlightAction(!1).position("bottom right").theme("error-toast");this._Toast.show(t)}}]),e}();t.default=a},function(e,t){"use strict";function n(e){"ngInject";e.state("app.signup",{url:"/signup",templateUrl:"./app/pages/auth/signup/signup.html"}),e.state("app.login",{url:"/login",templateUrl:"./app/pages/auth/login/login.html"}),e.state("app.updateProfile",{url:"/:userId/update-profile",templateUrl:"./app/pages/auth/profileInfo/update-profile.html",controller:"UpdateProfileController",controllerAs:"$ctrl"})}n.$inject=["$stateProvider"],Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),s=n(155),i=r(s),c=n(157),u=r(c),l=n(161),h=r(l),d=n(159),f=r(d),m=n(160),p=r(m),g=n(158),_=r(g),v=o.default.module("auth",[]);v.config(i.default),v.service("Auth",u.default),v.controller("PasswordResetController",h.default),v.directive("compareTo",f.default),v.controller("UpdateProfileController",p.default),v.controller("AuthUnauthedController",_.default),t.default=v},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r){"ngInject";n(this,e),this._$http=t,this._Storage=r}return e.$inject=["$http","Storage"],r(e,[{key:"signup",value:function(e){return this._$http({url:"/users",method:"POST",data:e})}},{key:"login",value:function(e){return this._$http({url:"/users/authenticate",method:"POST",data:e})}},{key:"forgot",value:function(e){return this._$http({url:"/users/forgot",method:"POST",data:e})}},{key:"reset",value:function(e){return this._$http({url:"/users/reset",method:"POST",data:e})}},{key:"updateProfile",value:function(e,t){return this._$http({url:"/users/"+e+"/updateProfile",method:"POST",data:t})}},{key:"isLoggedIn",value:function(){return this._Storage.get("opinion-token")}},{key:"getUser",value:function(){var e=this._Storage.get("user");return e?angular.fromJson(e):void 0}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r){"ngInject";var a=this;n(this,e),this._$dialog=t,this._$rootScope=r,this._$rootScope.$on("loggedIn",function(){a._$dialog.hide()}),this._$rootScope.$on("signedUp",function(){a._$dialog.hide()})}return e.$inject=["$mdDialog","$rootScope"],r(e,[{key:"close",value:function(){this._$dialog.hide()}}]),e}();t.default=a},function(e,t){"use strict";function n(){"ngInject";return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(e,t,n,r){r.$validators.compareTo=function(t){return t==e.otherModelValue},e.$watch("otherModelValue",function(){r.$validate()})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o,s){"ngInject";n(this,e),this._$stateParams=t,this._Auth=r,this._Toast=a,this._Storage=o,this._$state=s,this.userId=t.userId,this.user=this._Auth.getUser()}return e.$inject=["$stateParams","Auth","Toast","Storage","$state"],r(e,[{key:"skip",value:function(){this._$state.go("app.profile.overview",{userId:this.userId})}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o){"ngInject";n(this,e),this._$state=t,this._$dialog=r,this._Auth=a,this._Toast=o,this.data={email:"",token:"",password:""}}return e.$inject=["$state","$mdDialog","Auth","Toast"],r(e,[{key:"close",value:function(){this._$dialog.hide()}},{key:"generateReset",value:function(){var e=this;this._Auth.forgot(this.data).then(function(t){t?(e.tokenSent=!0,e._Toast.success("Great! Check your email for futher instructions")):e._Toast.error(t.data.res.message)})}},{key:"attemptReset",value:function(){var e=this;this._Auth.reset(this.data).then(function(t){t?(e._Toast.success("Hooray! Now you can login"),e._$dialog.hide()):e._Toast.error(t.data.res.error)})}}]),e}();t.default=a},function(e,t){"use strict";function n(e){"ngInject";e.state("app.chats",{templateUrl:"./app/pages/chats/chats.tmpl.html",abstract:!0}),e.state("app.chats.inbox",{url:"/inbox",templateUrl:"./app/pages/chats/inbox/inbox.html",controller:"ChatsInboxController",controllerAs:"$ctrl"}),e.state("app.chats.inbox.messages",{url:"/:chatId/messages",templateUrl:"./app/pages/chats/messages/messages.html",controller:"ChatsMessagesController",controllerAs:"$ctrl"}),e.state("app.chats.saved",{url:"/saved",templateUrl:"./app/pages/chats/saved/saved.html",controller:"ChatsSavedController",controllerAs:"$ctrl"}),e.state("app.chats.saved.messages",{url:"/:chatId/messages",templateUrl:"./app/pages/chats/messages/messages.html",controller:"ChatsMessagesController",controllerAs:"$ctrl"}),e.state("app.chats.trash",{url:"/trash",templateUrl:"./app/pages/chats/trash/trash.html",controller:"ChatsTrashController",controllerAs:"$ctrl"}),e.state("app.chats.trash.messages",{url:"/:chatId/messages",templateUrl:"./app/pages/chats/messages/messages.html",controller:"ChatsMessagesController",controllerAs:"$ctrl"})}n.$inject=["$stateProvider"],Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),s=n(164),i=r(s),c=n(162),u=r(c),l=n(165),h=r(l),d=n(166),f=r(d),m=n(167),p=r(m),g=n(168),_=r(g),v=o.default.module("chats",[]);v.config(u.default),v.service("Chat",i.default),v.controller("ChatsMessagesController",f.default),v.controller("ChatsInboxController",h.default),v.controller("ChatsSavedController",p.default),v.controller("ChatsTrashController",_.default),t.default=v},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){"ngInject";n(this,e),this._$http=t}return e.$inject=["$http"],r(e,[{key:"create",value:function(e){return this._$http({url:"/chats/",method:"POST",data:e})}},{key:"list",value:function(e){return this._$http({url:"/chats/",method:"GET",params:{timestamp:e.timestamp,page:e.page}})}},{key:"markRead",value:function(e){return this._$http({url:"/chats/markRead/"+e,method:"GET"})}},{key:"findUnread",value:function(e){return this._$http({url:"/chats/"+e+"/unread",method:"GET"})}},{key:"get",value:function(e){return this._$http({url:"/chats/"+e,method:"GET"})}},{key:"message",value:function(e,t){return this._$http({url:"/chats/"+e+"/message",method:"POST",data:t})}},{key:"save",value:function(e){return this._$http({url:"/chats/"+e+"/save",method:"POST"})}},{key:"unsave",value:function(e){return this._$http({url:"/chats/"+e+"/unsave",method:"POST"})}},{key:"getSaved",value:function(e,t){return this._$http({url:"/chats/"+e+"/saved",method:"GET",params:{timestamp:t.timestamp,page:t.page}})}},{key:"remove",value:function(e){return this._$http({url:"/chats/"+e+"/remove",method:"POST"})}},{key:"unremove",value:function(e){return this._$http({url:"/chats/"+e+"/unremove",method:"POST"})}},{key:"getRemoved",value:function(e,t){return this._$http({url:"/chats/"+e+"/removed",method:"GET",params:{timestamp:t.timestamp,page:t.page}})}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){"ngInject";n(this,e),this._Chat=t,this.chats=[],this.getChats(),this.lastUpdated=0,this.chatsPage=0}return e.$inject=["Chat"],r(e,[{key:"getChats",value:function(e){var t=this;e=e||{},e.timestamp=this.lastUpdated,e.page=this.chatsPage,this._Chat.list(e).then(function(n){n.data.res.records&&(e.append?t.chats=t.chats.concat(n.data.res.records):t.chats=n.data.res.records.concat(t.chats),t.lastUpdated=Date.now(),t.noMoreChats=!n.data.res.morePages)})}},{key:"loadMore",value:function(){this.chatsPage++,this.lastUpdated=0,this.getChats({append:!0})}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o,s){"ngInject";var i=this;n(this,e),this._Auth=t,this._Chat=r,this._$state=a,this._$stateParams=o,this._$rootScope=s,this.chatId=o.chatId,this.currentUser=this._Auth.getUser(),this.messages=[],this.getChat(),this._$rootScope.$on("newMessage",function(){i.updateMessages({append:!0})})}return e.$inject=["Auth","Chat","$state","$stateParams","$rootScope"],r(e,[{key:"getChat",value:function(){var e=this;this._Chat.get(this.chatId).then(function(t){console.log(t),e.chat=t.data.res.chat,e.messages=t.data.res.record.messages})}},{key:"updateMessages",value:function(e){var t=this;e=e||{},this._Chat.get(this.chatId).then(function(n){e.append?t.messages=t.messages.concat(n.data.res.record.messages[0]):t.messages=n.data.res.record.messages.concat(t.messages)})}},{key:"closeMessage",value:function(){this._$rootScope.$broadcast("showChats"),this._$state.go("app.chats.inbox")}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r){"ngInject";n(this,e),this._Chat=t,this._Auth=r,this.chats=[],this.lastUpdated=0,this.chatsPage=0,this.currentUser=this._Auth.getUser()._id,this.getChats()}return e.$inject=["Chat","Auth"],r(e,[{key:"getChats",value:function(e){var t=this;e=e||{},e.timestamp=this.lastUpdated,e.page=this.chatsPage,this._Chat.getSaved(this.currentUser,e).then(function(n){n.data.res.records?(e.append?t.chats=t.chats.concat(n.data.res.records):t.chats=n.data.res.records.concat(t.chats),t.lastUpdated=Date.now(),t.noMoreChats=!n.data.res.morePages):t.noMoreChats=!0})}},{key:"loadMore",value:function(){this.chatsPage++,this.lastUpdated=0,this.getChats({append:!0})}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r){"ngInject";n(this,e),this.chatsPages=0,this.lastUpdated=0,this._Chat=t,this._Auth=r,this.chats=[],this.currentUser=this._Auth.getUser()._id,this.getChats()}return e.$inject=["Chat","Auth"],r(e,[{key:"getChats",value:function(e){var t=this;e=e||{},e.timestamp=this.lastUpdated,e.page=this.chatsPages,this._Chat.getRemoved(this.currentUser,e).then(function(n){n.data.res.records?(e.append?t.chats=t.chats.concat(n.data.res.records):t.chats=n.data.res.records.concat(t.chats),t.lastUpdated=Date.now(),t.noMoreChats=!n.data.res.morePages):t.noMoreChats=!0})}},{key:"loadMore",value:function(){this.chatsPages++,this.lastUpdated=0,this.getChats({append:!0})}}]),e}();t.default=a},function(e,t){"use strict";function n(e){"ngInject";e.state("app.home",{url:"/",controller:"HomeCtrl",controllerAs:"$ctrl",templateUrl:"./app/pages/home/home.html"})}n.$inject=["$stateProvider"],Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r){"ngInject";n(this,e),this._Thread=t,this._Auth=r,this._isLoggedIn=this._Auth.isLoggedIn(),this.getHome(),this.threads=[],this.lastUpdated=0,this.homeSearch="",this.homePage=0}return e.$inject=["Thread","Auth"],r(e,[{key:"getHome",value:function(e){var t=this;e=e||{},e.timestamp=this.lastUpdated,e.filter=this.homeSearch,e.page=this.homePage,this._isLoggedIn?this._Thread.authedHome(e).then(function(n){e.append?t.threads=t.threads.concat(n.data.res.records):t.threads=n.data.res.records.concat(t.threads),t.lastUpdated=Date.now(),t.noMoreThreads=!n.data.res.morePages}):this._Thread.unHome(e).then(function(n){t.homeSearch&&(t.threads=[]),e.append?t.threads=t.threads.concat(n.data.res.records):t.threads=n.data.res.records.concat(t.threads),t.lastUpdated=Date.now(),t.noMoreThreads=!n.data.res.morePages})}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),s=n(169),i=r(s),c=n(170),u=r(c),l=o.default.module("home",[]);l.config(i.default),l.controller("HomeCtrl",u.default),t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a);n(171),n(156),n(190),n(205),n(163),n(181);var s=["home","auth","streams","threads","chats","profile"],i=o.default.module("app.pages",s);t.default=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r){"ngInject";n(this,e),this._User=t,this._$stateParams=r,this.userId=this._$stateParams.userId,this.activities=[],this.lastUpdated=0,this.newActivitiesCount=0,this.getActivities()}return e.$inject=["User","$stateParams"],r(e,[{key:"getActivities",value:function(){var e=this;this._User.activity(this.userId).then(function(t){e.activities=t.data.res.records})}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o){"ngInject";n(this,e),this._Comment=t,this._$stateParams=r,this._userId=this._$stateParams.userId,this._$timeout=a,this._$rootScope=o,this.comments=[],this.lastUpdated=0,this.commentsPage=0,this.getComments()}return e.$inject=["Comment","$stateParams","$timeout","$rootScope"],r(e,[{key:"getComments",value:function(e){var t=this;e=e||{},e.timestamp=this.lastUpdated,e.page=this.commentsPage,this._Comment.userComments(this._userId,e).then(function(n){e.append?t.comments=t.comments.concat(n.data.res.records):t.comments=n.data.res.records.concat(t.comments),t.lastUpdated=Date.now(),t.noMoreComments=!n.data.res.morePages})}},{key:"loadMore",value:function(){this.commentsPage++,this.lastUpdated=0,this.getComments({append:!0})}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o){"ngInject";var s=this;n(this,e),this._$dialog=t,this._$rootScope=a,this._$state=o,this.user=r,this._$rootScope.$on("profileUpdated",function(){s._$dialog.hide()})}return e.$inject=["$mdDialog","user","$rootScope","$state"],r(e,[{key:"close",value:function(){this._$dialog.hide()}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o,s,i){"ngInject";n(this,e),this._Chat=t,this._Toast=r,this._Auth=a,this._$dialog=o,this._message=s,this.user=i,this.data={message:"",creator:this._Auth.getUser()._Id,chatId:this._message._id}}return e.$inject=["Chat","Toast","Auth","$mdDialog","message","user"],r(e,[{key:"close",value:function(){this._$dialog.hide()}},{key:"sendMessage",value:function(e){var t=this;e&&this._Chat.message(this._message._id,this.data).then(function(e){t._Toast.success("chat sent to "+t.user.username),t._$dialog.hide()})}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o){"ngInject";n(this,e),this._User=t,this._Toast=r,this._$dialog=a,this.user=o,this.data={password:"",newPassword:"",confirm:""}}return e.$inject=["User","Toast","$mdDialog","user"],r(e,[{key:"close",value:function(){this._$dialog.hide()}},{key:"resetPassword",value:function(e){var t=this;e?this._User.profileReset(this.user._id,this.data).then(function(e){t.resetForm(),t._Toast.success("You have just reset your password, "+e.data.res.record.username),t._$dialog.hide()}):this._Toast.error("Hmm, your form is not valid")}},{key:"resetForm",value:function(){this.resetPasswordForm.$setUntouched(),this.resetPasswordForm.$setPristine()}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o){"ngInject";n(this,e),this._User=t,this._$location=r,this._$timeout=a,this._$dialog=o,this.search=""}return e.$inject=["User","$location","$timeout","$mdDialog"],r(e,[{key:"close",value:function(){this._$dialog.hide()}},{key:"doSearch",value:function(e){var t=this;this._User.search(e).then(function(e){t.items=e.data.res.records})}},{key:"goToUser",value:function(e){this._$dialog.hide(),this._$location.url("/profile/"+e._id+"/overview")}},{key:"clearSearch",value:function(){var e=this;this._$timeout(function(){e.search=""},500)}}]),e}();t.default=a},function(e,t){"use strict";function n(e){"ngInject";e.state("app.profile",{url:"/profile/:userId",templateUrl:"./app/pages/profile/profile.tmpl.html",controller:"ProfileController",controllerAs:"$ctrl"}),e.state("app.profile.overview",{url:"/overview",templateUrl:"./app/pages/profile/overview/overview.html"}),e.state("app.profile.threads",{url:"/threads",templateUrl:"./app/pages/profile/threads/threads.html",controller:"ProfileThreadsController",controllerAs:"$ctrl"}),e.state("app.profile.comments",{url:"/comments",templateUrl:"./app/pages/profile/comments/comments.html",controller:"ProfileCommentsController",controllerAs:"$ctrl"}),e.state("app.profile.saved",{url:"/saved",templateUrl:"/app/pages/profile/saved/saved.html",controller:"ProfileSavedController",controllerAs:"$ctrl"}),e.state("app.profile.activity",{url:"/activity",templateUrl:"./app/pages/profile/activity/activity.html",controller:"ProfileActivityController",controllerAs:"$ctrl"})}n.$inject=["$stateProvider"],Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o,s,i){"ngInject";var c=this;n(this,e),this._User=t,this._Auth=r,this._Thread=a,this._$stateParams=o,this._$rootScope=i,this._userId=o.userId,
this._$state=s,this.currentState=this._$state.current.name,this.currentUser=this._Auth.getUser(),this.getUser(),this._$rootScope.$on("userFollowed",function(){c.getUser()}),this._$rootScope.$on("userUnfollowed",function(){c.getUser()}),this._$rootScope.$on("profileUpdated",function(){c.getUser()})}return e.$inject=["User","Auth","Thread","$stateParams","$state","$rootScope"],r(e,[{key:"getUser",value:function(){var e=this;this._User.single(this._userId).then(function(t){e.user=t.data.res.record,e.followers=t.data.res.followers,e.alreadyFollowing=t.data.res.alreadyFollowing})}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),s=n(184),i=r(s),c=n(179),u=r(c),l=n(180),h=r(l),d=n(183),f=r(d),m=n(174),p=r(m),g=n(182),_=r(g),v=n(173),y=r(v),$=n(178),b=r($),k=n(176),C=r(k),w=n(175),P=r(w),T=n(177),S=r(T),j=o.default.module("profile",[]);j.config(u.default),j.service("User",i.default),j.controller("ProfileController",h.default),j.controller("ProfileThreadsController",f.default),j.controller("ProfileCommentsController",p.default),j.controller("ProfileSavedController",_.default),j.controller("ProfileActivityController",y.default),j.controller("UsersSearchController",b.default),j.controller("ProfileMessageController",C.default),j.controller("ProfileEditController",P.default),j.controller("ProfileResetController",S.default),t.default=j},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a){"ngInject";n(this,e),this._Thread=t,this._Comment=r,this._$stateParams=a,this._userId=this._$stateParams.userId,this.lastThreadUpdated=0,this.threadSearch="",this.threadPage=0,this.lastCommentUpdated=0,this.commentsSearch="",this.commentPage=0,this.threads=[],this.comments=[],this.getThreads(),this.getComments()}return e.$inject=["Thread","Comment","$stateParams"],r(e,[{key:"getThreads",value:function(e){var t=this;e=e||{},e.timestamp=this.lastThreadUpdated,e.page=this.threadPage,e.filter=this.threadSearch,this._Thread.userSaved(this._userId,e).then(function(n){t.threadSearch&&(t.threads=[]),e.append?t.threads=t.threads.concat(n.data.res.records):t.threads=n.data.res.records.concat(t.threads),t.lastThreadUpdated=Date.now(),t.noMoreThreads=!n.data.res.morePages})}},{key:"getComments",value:function(e){var t=this;e=e||{},e.timestamp=this.lastCommentUpdated,e.page=this.commentPage,e.filter=this.commentsSearch,this._Comment.userSaved(this._userId,e).then(function(n){t.commentsSearch&&(t.comments=[]),e.append?t.comments=t.comments.concat(n.data.res.records):t.comments=n.data.res.records.concat(t.comments),t.lastCommentUpdated=Date.now(),t.noMoreComments=!n.data.res.morePages})}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o,s){"ngInject";n(this,e),this._Thread=t,this._User=r,this._$stateParams=a,this._$rootScope=s,this._userId=a.userId,this._$timeout=o,this.threads=[],this.lastUpdated=0,this.threadPage=0,this.getThreads()}return e.$inject=["Thread","User","$stateParams","$timeout","$rootScope"],r(e,[{key:"getThreads",value:function(e){var t=this;e=e||{},e.timestamp=this.lastUpdated,e.page=this.threadPage,this._Thread.userThreads(this._userId,e).then(function(n){e.append?t.threads=t.threads.concat(n.data.res.records):t.threads=n.data.res.records.concat(t.threads),t.lastUpdated=Date.now(),t.noMoreThreads=!n.data.res.morePages})}},{key:"loadMore",value:function(){this.threadPage++,this.lastUpdated=0,this.getThreads({append:!0})}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){"ngInject";n(this,e),this._$http=t}return e.$inject=["$http"],r(e,[{key:"single",value:function(e){return this._$http({url:"/users/"+e,method:"GET"})}},{key:"search",value:function(e){return this._$http({url:"/users/search/"+e,method:"GET"})}},{key:"follow",value:function(e){return this._$http({url:"/users/"+e+"/follow",method:"POST"})}},{key:"unfollow",value:function(e){return this._$http({url:"/users/"+e+"/unfollow",method:"POST"})}},{key:"activity",value:function(e){return this._$http({url:"/activity/feed/"+e,method:"GET"})}},{key:"notifications",value:function(){return this._$http({url:"/users/notifications",method:"GET"})}},{key:"markRead",value:function(e,t){return this._$http({url:"/users/notifications/"+e,method:"POST",data:t})}},{key:"profileReset",value:function(e,t){return this._$http({url:"/users/"+e+"/profileReset",method:"POST",data:t})}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){"ngInject";n(this,e),this._$dialog=t}return e.$inject=["$mdDialog"],r(e,[{key:"close",value:function(){this._$dialog.hide()}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o){"ngInject";n(this,e),this._Stream=t,this._$location=r,this._$timeout=a,this._$dialog=o,this.search=""}return e.$inject=["Stream","$location","$timeout","$mdDialog"],r(e,[{key:"close",value:function(){this._$dialog.hide()}},{key:"doSearch",value:function(e){var t=this;this._Stream.search(e).then(function(e){t.items=e.data.res.records})}},{key:"goToUser",value:function(e){this._$dialog.hide(),this._$location.url("streams/"+e._id)}},{key:"clearSearch",value:function(){var e=this;this._$timeout(function(){e.search=""},500)}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o){"ngInject";var s=this;n(this,e),this._Stream=t,this._$timeout=r,this._$rootScope=a,this._$dialog=o,this.streams=[],this.streamsSearch="",this.streamPage=0,this.lastUpdated=0,this.getStreams(),this.getCount(),this._$rootScope.$on("streamCreated",function(){s._$dialog.hide(),s.getStreams({append:!0})})}return e.$inject=["Stream","$timeout","$rootScope","$mdDialog"],r(e,[{key:"getStreams",value:function(e){var t=this;e=e||{},e.filter=this.streamsSearch,e.timestamp=this.lastUpdated,e.page=this.streamPage,this._Stream.get(e).success(function(n){t.streamsSearch&&(t.streams=[]),e.append?t.streams=t.streams.concat(n.res.records):t.streams=n.res.records.concat(t.streams),0==n.res.morePages&&(t.noMoreStreams=!0),t.lastUpdated=Date.now()})}},{key:"getCount",value:function(){var e=this;this._Stream.count().then(function(t){e.streamCount=t.data.res.streamCount})}},{key:"loadMore",value:function(){this.streamPage++,this.lastUpdated=0,this.getStreams({append:!0})}},{key:"search",value:function(e,t){var n,r=this;e!==t&&(this.streams=[]),this._$timeout.cancel(n),n=this._$timeout(function(){e?r.getStreams():r.streamsSearchEnabled&&(r.lastUpdated=0,r.getStreams()),r.streamsSearchEnabled=""!==r.streamsSearch},500)}},{key:"byThreads",value:function(){this._$rootScope.$broadcast("streamByThreads")}},{key:"bySubscribers",value:function(){this._$rootScope.$broadcast("streamBySubscribers")}},{key:"byDate",value:function(){this._$rootScope.$broadcast("streamByDate")}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o,s,i,c,u,l){"ngInject";var h=this;n(this,e),this._Stream=r,this._Thread=a,this._Auth=t,this._isLoggedIn=this._Auth.isLoggedIn(),this._$rootScope=i,this._$dialog=s,this._$timeout=c,this._Upload=u,this._Toast=l,this.streamId=o.streamId,this.threads=[],this.threadsSearch="",this.threadPage=0,this.lastUpdated=0,this.getStream(),this.getThreads(),this._isLoggedIn&&(this.currentUser=this._Auth.getUser()._id),this._$rootScope.$on("threadCreated",function(){h._$dialog.hide(),h.getThreads({append:!0})})}return e.$inject=["Auth","Stream","Thread","$stateParams","$mdDialog","$rootScope","$timeout","Upload","Toast"],r(e,[{key:"getStream",value:function(){var e=this;this._Stream.single(this.streamId).then(function(t){e.stream=t.data.res.record,e.stream.moderators.forEach(function(t){e.currentUser==t._id&&(e.moderator=!0)})})}},{key:"getThreads",value:function(e){var t=this;e=e||{},e.filter=this.threadsSearch,e.timestamp=this.lastUpdated,e.page=this.threadPage,this._Thread.get(this.streamId,e).then(function(n){t.threadsSearch&&(t.threads=[]),e.append?t.threads=t.threads.concat(n.data.res.records):t.threads=n.data.res.records.concat(t.threads),t.noMoreThreads=!n.data.res.morePages,t.lastUpdated=Date.now()})}},{key:"uploadImage",value:function(e){var t=this;e&&this._Upload.upload({url:"/streams/uploadImage/"+this.streamId,file:e}).then(function(e){t._Toast.success("You have just uploaded an image for your stream")},function(e){parseInt(100*e.loaded/e.total);console.log(t.progressPercentage)})}},{key:"loadMore",value:function(){this.threadPage++,this.lastUpdated=0,this.getThreads({append:!0})}},{key:"search",value:function(e,t){var n,r=this;e!==t&&(this.threads=[]),this._$timeout.cancel(n),n=this._$timeout(function(){e?r.getThreads():r.threadsSearchEnabled&&(r.lastUpdated=0,r.getThreads()),r.threadsSearchEnabled=""!==r.threadsSearch},500)}},{key:"byScore",value:function(){this._$rootScope.$broadcast("threadByScore")}},{key:"byComments",value:function(){this._$rootScope.$broadcast("threadByComments")}},{key:"bySaves",value:function(){this._$rootScope.$broadcast("threadBySaves")}},{key:"byDate",value:function(){this._$rootScope.$broadcast("threadByDate")}}]),e}();t.default=a},function(e,t){"use strict";function n(e){"ngInject";e.state("app.streamsList",{url:"/streams",templateUrl:"./app/pages/streams/list/list.html",controller:"StreamsListCtrl",controllerAs:"$ctrl"}),e.state("app.singleStream",{url:"/streams/:streamId",templateUrl:"./app/pages/streams/single/single.html",controller:"StreamsSingleCtrl",controllerAs:"$ctrl"}),e.state("app.trendingStreams",{url:"/trending",templateUrl:"./app/pages/streams/trending/trending.html",controller:"TrendingStreamsCtrl",controllerAs:"$ctrl"}),e.state("app.subscribedStreams",{url:"/subscribed",templateUrl:"./app/pages/streams/subscribed/subscribed.html",controller:"SubscribedStreamsCtrl",controllerAs:"$ctrl"})}n.$inject=["$stateProvider"],Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),s=n(189),i=r(s),c=n(191),u=r(c),l=n(187),h=r(l),d=n(188),f=r(d),m=n(193),p=r(m),g=n(192),_=r(g),v=n(185),y=r(v),$=n(186),b=r($),k=o.default.module("streams",[]);k.config(i.default),k.service("Stream",u.default),k.controller("StreamsListCtrl",h.default),k.controller("StreamsSingleCtrl",f.default),k.controller("TrendingStreamsCtrl",p.default),k.controller("SubscribedStreamsCtrl",_.default),k.controller("StreamsCreateController",y.default),k.controller("StreamsSearchController",b.default),t.default=k},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){"ngInject";n(this,e),this._$http=t}return e.$inject=["$http"],r(e,[{key:"create",value:function(e){return this._$http({url:"/streams",method:"POST",data:e})}},{key:"get",value:function(e){return this._$http({url:"/streams",method:"GET",params:{subscribed:e.subscribed,unsubscribed:e.unsubscribed,timestamp:e.timestamp,filter:e.filter}})}},{key:"count",value:function(){return this._$http({url:"/streams/count",method:"GET"})}},{key:"search",value:function(e){return this._$http({url:"/streams/search/"+e,method:"GET"})}},{key:"single",value:function(e){return this._$http({url:"/streams/"+e,method:"GET"})}},{key:"subscribe",value:function(e){return this._$http({url:"/streams/"+e+"/subscribe",method:"POST"})}},{key:"unsubscribe",value:function(e){return this._$http({url:"/streams/"+e+"/unsubscribe",method:"POST"})}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){"ngInject";n(this,e),this._Stream=t,this.lastUpdated=0,this.streamPage=0,this.streams=[],this.getStreams()}return e.$inject=["Stream"],r(e,[{key:"getStreams",value:function(e){var t=this;e=e||{},e.timestamp=this.lastUpdated,e.page=this.streamPage,e.subscribed=!0,this._Stream.get(e).then(function(n){e.append?t.streams=t.streams.concat(n.data.res.records):t.streams=n.data.res.records.concat(t.streams),t.lastUpdated=Date.now(),t.noMoreStreams=!n.data.res.morePages})}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){"ngInject";n(this,e),this._Stream=t,this.lastUpdated=0,this.streamPage=0,this.streamSearch="",this.streams=[],this.getStreams()}return e.$inject=["Stream"],r(e,[{key:"getStreams",value:function(e){var t=this;e=e||{},e.timestamp=this.lastUpdated,e.filter=this.streamSearch,e.page=this.streamPage,this._Stream.get(e).then(function(n){t.streamSearch&&(t.streams=[]),e.append?t.streams=t.streams.concat(n.data.res.records):t.streams=n.data.res.records.concat(t.streams),t.lastUpdated=Date.now(),t.noMoreStreams=!n.data.res.morePages})}},{key:"loadMore",value:function(){this.streamPage++,this.lastUpdated=0,this.getStreams({append:!0})}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){"ngInject";n(this,e),this._$http=t}return e.$inject=["$http"],r(e,[{key:"create",value:function(e){return this._$http({url:"/comments",method:"POST",data:e})}},{key:"single",value:function(e){return this._$http({url:"/comments/"+e,method:"GET"})}},{key:"get",value:function(e,t){return this._$http({url:"/comments/threads/"+e,method:"GET",params:{timestamp:t.timestamp,filter:t.filter,page:t.page}})}},{key:"userComments",value:function(e,t){return this._$http({url:"/comments/user/"+e,method:"GET",params:{timestamp:t.timestamp,filter:t.filter,page:t.page}})}},{key:"userSaved",value:function(e,t){return this._$http({url:"/comments/saved/"+e,method:"GET",params:{timestamp:t.timestamp,filter:t.filter,page:t.page}})}},{key:"like",value:function(e){return this._$http({url:"/comments/"+e+"/like",method:"POST"})}},{key:"dislike",value:function(e){return this._$http({url:"/comments/"+e+"/dislike",method:"POST"})}},{key:"save",value:function(e){return this._$http({url:"/comments/"+e+"/save",method:"POST"})}},{key:"unsave",value:function(e){return this._$http({url:"/comments/"+e+"/unsave",method:"POST"})}},{key:"modify",value:function(e,t){return this._$http({url:"/comments/"+e+"/modify",method:"POST",data:t})}},{key:"remove",value:function(e){return this._$http({url:"/comments/"+e+"/remove",method:"DELETE"})}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){"ngInject";n(this,e),this._$dialog=t}return e.$inject=["$mdDialog"],r(e,[{key:"close",value:function(){this._$dialog.hide()}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o){"ngInject";n(this,e),this._$dialog=t,this._Thread=r,this._Stream=a,this._Toast=o,this.getStreams(),this.data={title:"",content:"",link:"",stream:""}}return e.$inject=["$mdDialog","Thread","Stream","Toast"],r(e,[{key:"close",value:function(){this._$dialog.hide()}},{key:"getStreams",value:function(e){var t=this;e=e||{},this._Stream.get(e).then(function(e){t.streams=e.data.res.records})}},{key:"create",value:function(e){var t=this;e?this._Thread.create(this.data).then(function(e){e.data.success?(t._Toast.success("You have just created a thread: "+e.data.res.record.title),t.close()):t._Toast.error(e.data.res.message)}):this._Toast.error("There seems to be an error with your form")}},{key:"makeLink",value:function(){this.hasLink=!this.hasLink}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){"ngInject";n(this,e),this._$dialog=t}return e.$inject=["$mdDialog"],r(e,[{key:"close",value:function(){this._$dialog.hide()}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o){"ngInject";n(this,e),this._$dialog=a,this._$state=r,this._Comment=t,this._item=o}return e.$inject=["Comment","$state","$mdDialog","item"],r(e,[{key:"close",value:function(){this._$dialog.hide()}},{key:"delete",value:function(){var e=this;this._Comment.remove(this._item._id).then(function(t){e._$dialog.hide(),e._$state.reload()})}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o){"ngInject";n(this,e),this._$dialog=a,this._$state=r,this._Thread=t,this._item=o}return e.$inject=["Thread","$state","$mdDialog","item"],r(e,[{key:"close",value:function(){this._$dialog.hide()}},{key:"delete",value:function(){var e=this;this._Thread.remove(this._item._id).then(function(t){e._$dialog.hide(),e._$state.reload()})}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a){"ngInject";n(this,e),this._$dialog=r,this._Comment=t,this._item=a,this.getComment()}return e.$inject=["Comment","$mdDialog","item"],r(e,[{key:"getComment",value:function(){var e=this;this._Comment.single(this._item._id).then(function(t){e.comment=t.data.res.record})}},{key:"close",value:function(){this._$dialog.hide()}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a){"ngInject";n(this,e),this._Thread=t,this._$dialog=r,this._item=a,this.getThread()}return e.$inject=["Thread","$mdDialog","item"],r(e,[{key:"getThread",value:function(){var e=this;this._Thread.single(this._item._id).then(function(t){e.thread=t.data.res.record})}},{key:"close",value:function(){this._$dialog.hide()}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o){"ngInject";n(this,e),this._Thread=t,this._$location=r,this._$timeout=a,this._$dialog=o,this.search=""}return e.$inject=["Thread","$location","$timeout","$mdDialog"],r(e,[{key:"close",value:function(){this._$dialog.hide()}},{key:"doSearch",value:function(e){var t=this;this._Thread.search(e).then(function(e){t.items=e.data.res.records})}},{key:"goToUser",value:function(e){this._$dialog.hide(),this._$location.url(e._id)}},{key:"clearSearch",value:function(){var e=this;this._$timeout(function(){e.search=""},500)}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a,o,s,i){"ngInject";var c=this;n(this,e),this._Thread=t,this._Comment=r,this._$rootScope=o,this._$dialog=s,this._$timeout=i,this.streamId=a.streamId,this.threadId=a.threadId,this.comments=[],this.commentPage=0,this.commentsSearch="",this.lastUpdated=0,this.getThread(),this.getComments(),this._$rootScope.$on("commentCreated",function(){c._$dialog.hide(),c.getComments({append:!0})})}return e.$inject=["Thread","Comment","$stateParams","$rootScope","$mdDialog","$timeout"],r(e,[{key:"getThread",value:function(){var e=this;this._Thread.single(this.threadId).then(function(t){e.thread=t.data.res.record})}},{key:"getComments",value:function(e){var t=this;e=e||{},e.filter=this.commentsSearch,e.timestamp=this.lastUpdated,e.page=this.commentPage,this._Comment.get(this.threadId,e).then(function(n){t.commentsSearch&&(t.comments=[]),e.append?t.comments=t.comments.concat(n.data.res.records):t.comments=n.data.res.records.concat(t.comments),t.noMoreComments=!n.data.res.morePages,t.lastUpdated=Date.now()})}},{key:"loadMore",value:function(){this.commentPage++,this.lastUpdated=0,this.getComments({append:!0})}},{key:"search",value:function(e,t){var n,r=this;e!=t&&(this.comments=[]),this._$timeout.cancel(n),n=this._$timeout(function(){e?r.getComments():r.commentsSearchEnabled&&(r.lastUpdated=0,r.getComments()),r.commentsSearchEnabled=""!==r.commentsSearch},500)}}]),e}();t.default=a},function(e,t){"use strict";function n(e){"ngInject";e.state("app.singleThread",{url:"/:streamId/:threadId",templateUrl:"./app/pages/threads/single/single.html",controller:"threadsSingleCtrl",controllerAs:"$ctrl"})}n.$inject=["$stateProvider"],Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),s=n(204),i=r(s),c=n(206),u=r(c),l=n(194),h=r(l),d=n(203),f=r(d),m=n(201),p=r(m),g=n(199),_=r(g),v=n(200),y=r(v),$=n(198),b=r($),k=n(197),C=r(k),w=n(195),P=r(w),T=n(196),S=r(T),j=n(202),U=r(j),O=o.default.module("threads",[]);O.config(i.default),O.service("Thread",u.default),O.service("Comment",h.default),O.controller("threadsSingleCtrl",f.default),O.controller("EditThreadDialogController",p.default),O.controller("DeleteThreadDialogController",_.default),O.controller("DeleteCommentController",b.default),O.controller("EditCommentController",y.default),O.controller("ThreadsCreateController",C.default),O.controller("CommentsCreateController",P.default),O.controller("CreateThreadAnywhereController",S.default),O.controller("ThreadsSearchController",U.default),t.default=O},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){"ngInject";n(this,e),this._$http=t}return e.$inject=["$http"],r(e,[{key:"create",value:function(e){return this._$http({url:"/threads",method:"POST",data:e})}},{key:"get",value:function(e,t){return this._$http({url:"/threads/"+e+"/threads",method:"GET",params:{timestamp:t.timestamp,filter:t.filter,page:t.page}})}},{key:"search",value:function(e){return this._$http({url:"/threads/search/"+e,method:"GET"})}},{key:"unHome",value:function(e){return this._$http({url:"/threads/unauthHome",method:"GET",params:{timestamp:e.timestamp,filter:e.filter,page:e.page}})}},{key:"authedHome",value:function(e){return this._$http({url:"/threads/authedHome",method:"GET",params:{timestamp:e.timestamp,filter:e.filter,page:e.page}})}},{key:"userThreads",value:function(e,t){return this._$http({url:"/threads/user/"+e,method:"GET",params:{timestamp:t.timestamp,filter:t.filter,page:t.page}})}},{key:"userSaved",value:function(e,t){return this._$http({url:"/threads/saved/"+e,method:"GET",params:{timestamp:t.timestamp,filter:t.filter,page:t.page}})}},{key:"single",value:function(e){return this._$http({url:"./threads/"+e,method:"GET"})}},{key:"save",value:function(e){return this._$http({url:"/threads/"+e+"/save",method:"POST"})}},{key:"unsave",value:function(e){return this._$http({url:"/threads/"+e+"/unsave",method:"POST"})}},{key:"like",value:function(e){return this._$http({url:"/threads/"+e+"/like",method:"POST"})}},{key:"unlike",value:function(e){return this._$http({url:"/threads/"+e+"/dislike",method:"POST"})}},{key:"modify",value:function(e,t){return this._$http({url:"/threads/"+e+"/modify",method:"POST",data:t})}},{key:"remove",value:function(e){return this._$http({url:"/threads/"+e+"/remove",method:"DELETE"})}}]),e}();t.default=a}]);